{"ast":null,"code":"import _classCallCheck from\"/Users/zhangjing/Documents/projects/equipment-management/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/zhangjing/Documents/projects/equipment-management/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/zhangjing/Documents/projects/equipment-management/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/zhangjing/Documents/projects/equipment-management/node_modules/@babel/runtime/helpers/esm/createSuper\";import{Component}from\"react\";import axios from\"axios\";import\"./equipment-list.scss\";import{Link}from\"react-router-dom\";import store from'../../store/index';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EquipmentList=/*#__PURE__*/function(_Component){_inherits(EquipmentList,_Component);var _super=_createSuper(EquipmentList);function EquipmentList(props){var _this;_classCallCheck(this,EquipmentList);_this=_super.call(this,props);_this.getEquipmentList=function(){axios.get(\"http://localhost:8000/equipments\").then(function(res){var data=res.data;_this.setState({equipmentList:data});}).catch(function(){console.log(\"error\");});};_this.changeStore=function(){_this.setState(store.getState());};_this.deleteEquipment=function(){axios.post(\"http://localhost:8000/equipments/\",_this.state.currentId).then(function(){_this.setState({showMessage:false});}).catch(function(){console.log(\"error\");});};_this.state={equipmentList:[],showMessage:false,currentId:null};return _this;}_createClass(EquipmentList,[{key:\"componentDidMount\",value:function componentDidMount(){this.getEquipmentList();store.dispatch({type:'list'});}},{key:\"render\",value:// setEquipmentId=(currentId)=>{\n//   this.timer1= setTimeout(()=>{\n//   this.setState({currentId})\n// }) };\nfunction render(){return/*#__PURE__*/_jsxs(\"div\",{id:\"euqipment-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"confirm-message\",style:{display:this.state.showMessage?'block':'none'},children:[/*#__PURE__*/_jsx(\"p\",{children:\"Are you sure to delete the equipemnt ?\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"btn-wrap\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"comfirm\",onClick:this.deleteEquipment,children:\"Ok\"}),/*#__PURE__*/_jsx(\"button\",{className:\"cancel\",children:\"Cancel\"})]})]}),/*#__PURE__*/_jsx(\"ul\",{className:\"equipment-list\",children:this.state.equipmentList.map(function(equipment){return/*#__PURE__*/_jsxs(\"li\",{className:\"equipemnt-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"equipment-left\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"equipment-model\",children:equipment.model}),/*#__PURE__*/_jsx(\"span\",{children:equipment.id})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"equipment-right\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"equipment-date\",children:equipment.manufactureDate}),/*#__PURE__*/_jsxs(\"div\",{className:\"action mt20\",children:[/*#__PURE__*/_jsxs(Link,{to:'/detail/'+equipment.id,children:[\" \",/*#__PURE__*/_jsx(\"i\",{className:\"iconfont detail mr5\",children:\"\\uE7A6\"})]}),/*#__PURE__*/_jsxs(Link,{to:\"/add\",children:[\" \",/*#__PURE__*/_jsx(\"i\",{className:\"iconfont add mr5\",children:\"\\uE601\"})]}),/*#__PURE__*/_jsxs(\"span\",{children:[\" \",/*#__PURE__*/_jsx(\"i\",{className:\"iconfont delete\",children:\"\\uE6CD\"})]})]})]})]},equipment.id);})})]});}}]);return EquipmentList;}(Component);export default EquipmentList;","map":{"version":3,"sources":["/Users/zhangjing/Documents/projects/equipment-management/src/pages/equipment-list/equipment-list.jsx"],"names":["Component","axios","Link","store","EquipmentList","props","getEquipmentList","get","then","res","data","setState","equipmentList","catch","console","log","changeStore","getState","deleteEquipment","post","state","currentId","showMessage","dispatch","type","display","map","equipment","model","id","manufactureDate"],"mappings":"4hBAAA,OAASA,SAAT,KAA0B,OAA1B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,uBAAP,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,KAAP,KAAkB,mBAAlB,C,2FAEMC,CAAAA,a,8GACJ,uBAAYC,KAAZ,CAAmB,+CACjB,uBAAMA,KAAN,EADiB,MAYnBC,gBAZmB,CAYA,UAAM,CACtBL,KAAK,CACHM,GADF,CACM,kCADN,EAEEC,IAFF,CAEO,SAACC,GAAD,CAAS,CACb,GAAMC,CAAAA,IAAI,CAAGD,GAAG,CAACC,IAAjB,CACA,MAAKC,QAAL,CAAc,CACZC,aAAa,CAAEF,IADH,CAAd,EAGD,CAPF,EAQEG,KARF,CAQQ,UAAM,CACXC,OAAO,CAACC,GAAR,CAAY,OAAZ,EACD,CAVF,EAWF,CAxBkB,OAyBnBC,WAzBmB,CAyBP,UAAI,CACd,MAAKL,QAAL,CAAcR,KAAK,CAACc,QAAN,EAAd,EACD,CA3BkB,OA4BnBC,eA5BmB,CA4BH,UAAI,CAClBjB,KAAK,CACFkB,IADH,CACQ,mCADR,CAC4C,MAAKC,KAAL,CAAWC,SADvD,EAEGb,IAFH,CAEQ,UAAM,CACV,MAAKG,QAAL,CAAc,CACZW,WAAW,CAAC,KADA,CAAd,EAGD,CANH,EAOGT,KAPH,CAOS,UAAM,CACXC,OAAO,CAACC,GAAR,CAAY,OAAZ,EACD,CATH,EAUD,CAvCkB,CAEjB,MAAKK,KAAL,CAAa,CACXR,aAAa,CAAE,EADJ,CAEXU,WAAW,CAAC,KAFD,CAGXD,SAAS,CAAC,IAHC,CAAb,CAFiB,aAOlB,C,2DACD,4BAAoB,CAClB,KAAKf,gBAAL,GACAH,KAAK,CAACoB,QAAN,CAAe,CAACC,IAAI,CAAC,MAAN,CAAf,EACD,C,sBA8BD;AACA;AACA;AACA;AAEA,iBAAS,CACP,mBACE,aAAK,EAAE,CAAC,qBAAR,wBACE,aAAK,SAAS,CAAC,iBAAf,CAAiC,KAAK,CAAE,CAACC,OAAO,CAAC,KAAKL,KAAL,CAAWE,WAAX,CAAuB,OAAvB,CAA+B,MAAxC,CAAxC,wBACE,6DADF,cAEE,aAAK,SAAS,CAAC,UAAf,wBACE,eAAQ,SAAS,CAAC,SAAlB,CAA4B,OAAO,CAAE,KAAKJ,eAA1C,gBADF,cAEE,eAAQ,SAAS,CAAC,QAAlB,oBAFF,GAFF,GADF,cAQE,WAAI,SAAS,CAAC,gBAAd,UACG,KAAKE,KAAL,CAAWR,aAAX,CAAyBc,GAAzB,CAA6B,SAACC,SAAD,CAAe,CAC3C,mBACE,YAAI,SAAS,CAAC,gBAAd,wBACE,aAAK,SAAS,CAAC,gBAAf,wBACE,YAAK,SAAS,CAAC,iBAAf,UAAkCA,SAAS,CAACC,KAA5C,EADF,cAEE,sBAAOD,SAAS,CAACE,EAAjB,EAFF,GADF,cAKE,aAAK,SAAS,CAAC,iBAAf,wBACE,YAAK,SAAS,CAAC,gBAAf,UACGF,SAAS,CAACG,eADb,EADF,cAIE,aAAK,SAAS,CAAC,aAAf,wBACE,MAAC,IAAD,EAAM,EAAE,CAAE,WAAWH,SAAS,CAACE,EAA/B,4BAAoC,UAAG,SAAS,CAAC,qBAAb,oBAApC,GADF,cAEE,MAAC,IAAD,EAAM,EAAE,CAAC,MAAT,4BAAiB,UAAG,SAAS,CAAC,kBAAb,oBAAjB,GAFF,cAGE,yCAAO,UAAG,SAAS,CAAC,iBAAb,oBAAP,GAHF,GAJF,GALF,GAAoCF,SAAS,CAACE,EAA9C,CADF,CAkBD,CAnBA,CADH,EARF,GADF,CAiCD,C,2BAjFyB7B,S,EAoF5B,cAAeI,CAAAA,aAAf","sourcesContent":["import { Component } from \"react\";\nimport axios from \"axios\";\nimport \"./equipment-list.scss\";\nimport { Link } from \"react-router-dom\";\nimport store from '../../store/index';\n\nclass EquipmentList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      equipmentList: [],\n      showMessage:false,\n      currentId:null\n    };\n  }\n  componentDidMount() {\n    this.getEquipmentList();\n    store.dispatch({type:'list'});\n  }\n  getEquipmentList = () => {\n     axios\n      .get(\"http://localhost:8000/equipments\")\n      .then((res) => {\n        const data = res.data;\n        this.setState({\n          equipmentList: data,\n        });\n      })\n      .catch(() => {\n        console.log(\"error\");\n      });\n  };\n  changeStore=()=>{\n    this.setState(store.getState());\n  }\n  deleteEquipment=()=>{\n    axios\n      .post(\"http://localhost:8000/equipments/\",this.state.currentId)\n      .then(() => {\n        this.setState({\n          showMessage:false\n        })\n      })\n      .catch(() => {\n        console.log(\"error\");\n      });\n  }\n\n  // setEquipmentId=(currentId)=>{\n  //   this.timer1= setTimeout(()=>{\n  //   this.setState({currentId})\n  // }) };\n\n  render() {\n    return (\n      <div id=\"euqipment-container\">\n        <div className=\"confirm-message\" style={{display:this.state.showMessage?'block':'none'}}>\n          <p>Are you sure to delete the equipemnt ?</p>\n          <div className=\"btn-wrap\">\n            <button className=\"comfirm\" onClick={this.deleteEquipment}>Ok</button>\n            <button className=\"cancel\">Cancel</button>\n          </div>\n        </div>\n        <ul className=\"equipment-list\">\n          {this.state.equipmentList.map((equipment) => {\n            return (\n              <li className=\"equipemnt-item\" key={equipment.id}>\n                <div className=\"equipment-left\">\n                  <div className=\"equipment-model\">{equipment.model}</div>\n                  <span>{equipment.id}</span>\n                </div>\n                <div className=\"equipment-right\">\n                  <div className=\"equipment-date\">\n                    {equipment.manufactureDate}\n                  </div>\n                  <div className=\"action mt20\">\n                    <Link to={'/detail/'+equipment.id}> <i className=\"iconfont detail mr5\">&#xe7a6;</i></Link>\n                    <Link to=\"/add\"> <i className=\"iconfont add mr5\">&#xe601;</i></Link>\n                    <span> <i className=\"iconfont delete\">&#xe6cd;</i></span>\n                  </div>\n                </div>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nexport default EquipmentList;\n"]},"metadata":{},"sourceType":"module"}